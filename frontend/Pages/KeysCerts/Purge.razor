@inject HttpClient http

<MudButton Disabled="@_processing" OnClick="PurgeKeys" Variant="Variant.Filled" Color="Color.Secondary">
    @if (_processing)
    {
        <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true"/>
    }
    else
    {
        <MudIcon Class="ms-n1" Size="Size.Small" Icon="@Icons.Material.Filled.DeleteForever" Title="Delete" />
    }
    <MudText>Purge All Keys</MudText>
</MudButton>

@code {
    private bool _processing = false;

    private async Task PurgeKeys()
    {
        _processing = true;
        await http.GetAsync("/api/keys/purge");
        _processing = false;
    }
}